<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Estimate the number of samples needed to ascertain that the defect rate does not exceed a treshold • drawsneeded</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Estimate the number of samples needed to ascertain that the defect rate does not exceed a treshold">
<meta name="description" content="In an audit of a file of like items, we might use sampling to establish an estimate of the overall defect rate. Computes an estimate of the necessary number of sampled items given a posited defect rate, and a maximally acceptable defect rate.">
<meta property="og:description" content="In an audit of a file of like items, we might use sampling to establish an estimate of the overall defect rate. Computes an estimate of the necessary number of sampled items given a posited defect rate, and a maximally acceptable defect rate.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">drawsneeded</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cfjdoedens/drawsneeded/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<!-- [![Codecov test -->
<!-- coverage](https://codecov.io/gh/cfjdoedens/drawsneeded/graph/badge.svg)](https://app.codecov.io/gh/cfjdoedens/drawsneeded) -->
<!-- badges: end -->
<div class="section level1">
<div class="page-header"><h1 id="drawsneeded">drawsneeded<a class="anchor" aria-label="anchor" href="#drawsneeded"></a>
</h1></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>drawsneeded is an R package for use in auditing based on statistical sampling. It helps choose the sample size. This is based on the required level of certainty and the maximum allowed defect rate.</p>
<p>To make this more explicit, drawsneeded is useful when:</p>
<ol style="list-style-type: decimal">
<li>you want to audit the defect rate of a set of like items, and</li>
<li>you consider doing this audit by means of statistical sampling on the set of items, and</li>
<li>you want to establish whether or not the defect rate is below a certain threshold, and</li>
<li>you want to estimate how many items (draws) you need to sample, i.e. you want to estimate the needed sample size.</li>
</ol>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of drawsneeded from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"devtools"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"cfjdoedens/drawsneeded"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="overview-of-functions">Overview of functions<a class="anchor" aria-label="anchor" href="#overview-of-functions"></a>
</h2>
<ul>
<li>drawsneeded() – Estimate number of samples required.</li>
<li>drawsneeded_plot() – Visualize relationship between assumptions and sample size.</li>
<li>plot_varying_*() – Examine sensitivity of required samples to different parameters.</li>
<li>combined_plots() - Combine output of all plot functions in one picture.</li>
</ul>
</div>
<div class="section level2">
<h2 id="main-function-drawsneeded">Main function: drawsneeded()<a class="anchor" aria-label="anchor" href="#main-function-drawsneeded"></a>
</h2>
<p>The function drawsneeded(posited_defect_rate, allowed_defect_rate, cert) gives an estimate of the number of drawn items needed to establish with some certainty level, <em>cert</em>, that the defect rate is below a certain threshold, <em>allowed_defect_rate</em>. The assumption of drawsneeded() is that each drawn item exactly has <em>posited_defect_rate</em>. It might be that in practice the items have a defect of either 0 or 1, or, when they have a defect on a scale from 0 to 1, most items have 0 defect and most items will contain no defects at all, and some items will have a large defect, or are even totally defective. So, in practice the defect rate may have greater variance, but this assumption preserves its expected value.</p>
<p>Due to randomness, the actual number of needed drawn items might be smaller or bigger. Also, it might turn out, that the set has a higher defect rate than allowed_defect_rate. In that case no amount of draws will suffice to prove that the defect rate is below allowed_defect_rate.</p>
</div>
<div class="section level2">
<h2 id="statistical-model">Statistical model<a class="anchor" aria-label="anchor" href="#statistical-model"></a>
</h2>
<p>drawsneeded can be used in audits of financial records or administrative decisions, where the defect rate might be binary (0 or 1) or continuous (ranging from 0 to 1).</p>
<p>For example:</p>
<ul>
<li>In a financial audit, the overall defect rate might be the proportion of funds spent improperly.</li>
<li>In an administrative audit, the overall defect rate might be the proportion of decisions that violate policy.</li>
</ul>
<p>The function drawsneeded(posited_defect_rate, allowed_defect_rate, cert) gives an estimate of the minimum number of drawn items needed to establish with some certainty, cert, e.g. 0.95, that the defect rate is below allowed_defect_rate. For this estimation it assumes that the actual defect rate in the file of items equals the posited_defect_rate. It is up to the user of drawsneeded() to choose a posited_defect_rate(). When the posited_defect_rate is chosen conservative, i.e. on the high side, it can be used with some confidence to produce a not too low number. And vice versa we can set the posited_defect_rate on the low side to get a bottom estimate of the number of items that need to be drawn and checked.</p>
<p>drawsneeded() assumes that each item that will be drawn has a defect of posited_defect_rate. And it computes the minimum number of drawn items necessary to establish with cert certainty that posited_defect_rate &lt; allowed_defect_rate. Note that it might actually not be possible for any of the items in the file to have exactly that defect size.</p>
<p>The computation of this minimum is based on the binomial distribution. This is extended with the beta distribution to allow for non integer values of defects. (The binomial distribution assumes that there are very many items to draw from, which all have equal chance of being drawn, and there are so many items that when we have drawn some this does not change in a substantial way the rate of erroneous items.)</p>
<p>Note that in this scheme the statistical procedure that is used to estimate the defect rate in the file of items does <em>not</em> use the posited_defect_rate! The posited_defect_rate is only used as means to estimate the minimal number of items that need to be drawn to estimate the defect rate with sufficient certainty. The posited_defect_rate is used only for planning.</p>
<p>Note that the prior used by drawsneeded() is flat: each possible defect rate is beforehand given an equal probability.</p>
</div>
<div class="section level2">
<h2 id="advanced-use">Advanced use<a class="anchor" aria-label="anchor" href="#advanced-use"></a>
</h2>
<div class="section level3">
<h3 id="planning-versus-execution">Planning versus execution<a class="anchor" aria-label="anchor" href="#planning-versus-execution"></a>
</h3>
<p>The number that is produced by drawsneeded() gives an estimate of how many drawn items are needed to establish the defect rate in a set of like items. In order to have a statistical sound estimate of the defect rate, it is not necessary to stick to that planned number for actual drawing and evaluation! The number is just an indication of the effort needed.</p>
<p>For example, when drawsneeded() estimates that there are 365 draws needed (see the first example below), it might turn out that after 298 draws checked, not one defect was found. If the 298 items were chosen randomly, over the total set of items, it can be safely concluded that the defect rate is not more than 1 %. And there is no need to check the other 67 items.</p>
<p>On the other hand, when it turns out that the defect rate of the drawn and evaluated so far items is above the posited_defect_rate, one can do a new call on drawsneeded() to establish a new, and forcibly higher, number of draws that are needed. Care should be taken then that all items in the file had, and have, an equal chance of being selected.</p>
</div>
<div class="section level3">
<h3 id="combination-with-incremental-drawing">Combination with incremental drawing<a class="anchor" aria-label="anchor" href="#combination-with-incremental-drawing"></a>
</h3>
<p>In order to minimize the number of to be drawn and to be checked items one can explicitly proceed by making an optimistic, i.e. low, guess of the posited_defect_rate, and once this indeed turns out to be too optimistic, plan anew as described above with the actual defect rate found in the already checked items.</p>
</div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="id_01-percent-defect-expected">0.1 percent defect expected<a class="anchor" aria-label="anchor" href="#id_01-percent-defect-expected"></a>
</h3>
<div class="section level4">
<h4 id="posited_defect_rate--0001-allowed_defect_rate--001-cert--095">posited_defect_rate = <em>0.001</em>, allowed_defect_rate = 0.01, cert = 0.95<a class="anchor" aria-label="anchor" href="#posited_defect_rate--0001-allowed_defect_rate--001-cert--095"></a>
</h4>
<p>Suppose you know from previous experience that a small defect rate might exist in the set of items. You guess the defect rate to be no more than 0.1 percent for the total set. So you set posited_defect_rate to 0.001. You need a result with 95% certainty. So you set certainty to 0.95.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/drawsneeded.html">drawsneeded</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0.001</span>, allowed_defect_rate <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>            cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 365</span></span></code></pre></div>
<p>The conclusion is that you will need at least 365 samples.</p>
<p>In a picture this looks like:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/drawsneeded_plot.html">drawsneeded_plot</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0.001</span>,  allowed_defect_rate <span class="op">=</span> <span class="fl">0.01</span>,                                      cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-tiny-defects-plot-1.png" width="100%"></p>
<p>drawsneeded_plot() has called drawsneeded() to compute the number of items that should be in the sample. This number is 365. The plot then shows the chance graph, i.e. probability density function, of the postulated defect rate given there were n = 365 items drawn, and the sum of defects of these drawn items, k = n * posited_defect_rate = n * 0.01 = 365 * 0.01 = 3.65.</p>
<p>We can further analyse the situation by varying over posited_defect_rate, or over allowed_defect_rate or over cert. See the following three plots.</p>
</div>
<div class="section level4">
<h4 id="varying-over-the-posited-defect-rate">Varying over the posited defect rate<a class="anchor" aria-label="anchor" href="#varying-over-the-posited-defect-rate"></a>
</h4>
<p>First we vary over the posited defect rate:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_varying_posited_defect_rate.html">plot_varying_posited_defect_rate</a></span><span class="op">(</span>allowed_defect_rate <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>                                        cert <span class="op">=</span> <span class="fl">0.95</span>, max_n <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-tiny-defects-vary-eer-plot-1.png" width="100%"></p>
<p>We see that as posited_defect_rate goes near to allowed_defect_rate, the number of draws needed rises. In this graph only the results up to 1000 draws are shown. This limit can be made higher, thereby we zoom out to 100 times larger scale for the y-axis (the number of draws needed).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_varying_posited_defect_rate.html">plot_varying_posited_defect_rate</a></span><span class="op">(</span>allowed_defect_rate <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>                                        cert <span class="op">=</span> <span class="fl">0.95</span>, max_n <span class="op">=</span> <span class="fl">100000</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-tiny-defects-vary-eer-plot-100000-1.png" width="100%"></p>
<p>As we can see, when the posited_defect_rate comes more close to the allowed_defect_rate, the number of draws needed rises more sharply. Compare this graph with the previous graph: we see that, due to a 100 times bigger scale on the y-axis, the curve looks much flatter, for the part of the posited_defect_rate from 0 to 0.0050.</p>
<p>We can also study the variation of posited_defect_rate in a non graphical way:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/drawsneeded.html">drawsneeded</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.0</span>, by <span class="op">=</span> <span class="fl">0.001</span>, to <span class="op">=</span> <span class="fl">0.009</span><span class="op">)</span>,</span>
<span>            allowed_defect_rate <span class="op">=</span> <span class="fl">0.01</span>, cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="co">#&gt;     0 0.001 0.002 0.003 0.004 0.005 0.006 0.007 0.008 0.009 </span></span>
<span><span class="co">#&gt;   298   365   458   594   801  1143  1767  3104  6894 27195</span></span></code></pre></div>
<p>Again we see that for a posited defect rate of 0.001, we need 365 draws. The advantage of the non graphical presentation is that we can more easily compare the different numerical values.</p>
</div>
<div class="section level4">
<h4 id="varying-over-the-allowed-defect-rate">Varying over the allowed defect rate<a class="anchor" aria-label="anchor" href="#varying-over-the-allowed-defect-rate"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_varying_allowed_defect_rate.html">plot_varying_allowed_defect_rate</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0.001</span>,</span>
<span>                                        cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-tiny-defects-vary-aer-plot-1.png" width="100%"></p>
<p>We see that as the allowed_defect_rate moves away from the posited_defect_rate, the number of draws falls sharply.</p>
<p>Non graphically this looks like (note the 365 computed draws needed for allowed defect rate 0.01):</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/drawsneeded.html">drawsneeded</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0.001</span>,</span>
<span>            allowed_defect_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.002</span>, by <span class="op">=</span> <span class="fl">0.001</span>, to <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span>,</span>
<span>            cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0.002 0.003 0.004 0.005 0.006 0.007 0.008 0.009  0.01 </span></span>
<span><span class="co">#&gt;  5757  2190  1305   920   708   574   482   415   365</span></span></code></pre></div>
<p>and,</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/drawsneeded.html">drawsneeded</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0.001</span>,</span>
<span>            allowed_defect_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.02</span>, by <span class="op">=</span> <span class="fl">0.01</span>, to <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>            cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0.02 0.03 0.04 0.05 0.06 0.07 0.08 0.09  0.1 </span></span>
<span><span class="co">#&gt;  163  104   76   60   49   42   36   32   28</span></span></code></pre></div>
<p>and,</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/drawsneeded.html">drawsneeded</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0.001</span>,</span>
<span>            allowed_defect_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.2</span>, by <span class="op">=</span> <span class="fl">0.1</span>, to <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span>,</span>
<span>            cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 </span></span>
<span><span class="co">#&gt;  13   8   5   4   3   2   1   1</span></span></code></pre></div>
<p>The non graphical presentation allows us to explore the variation of values more precisely, than just looking at the graph.</p>
</div>
<div class="section level4">
<h4 id="varying-over-the-certainty">Varying over the certainty<a class="anchor" aria-label="anchor" href="#varying-over-the-certainty"></a>
</h4>
<p>Finally we can also vary over the certainty we apply.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_varying_cert.html">plot_varying_cert</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0.001</span>,</span>
<span>                         allowed_defect_rate <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-tiny-defects-vary-cert-plot-1.png" width="100%"></p>
<p>As might be expected: if we can do with less certainty, then we need fewer draws.</p>
<p>In raw numbers this looks like:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/drawsneeded.html">drawsneeded</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0.001</span>, allowed_defect_rate <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>            cert <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.50</span>, by <span class="op">=</span> <span class="fl">0.05</span>, to <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  0.5 0.55  0.6 0.65  0.7 0.75  0.8 0.85  0.9 0.95 </span></span>
<span><span class="co">#&gt;   76   88  102  118  137  159  187  223  275  365</span></span></code></pre></div>
<p>Note that for cert 0.95, we get again 365 draws needed.</p>
</div>
<div class="section level4">
<h4 id="all-plots-bundled-in-one-picture">All plots bundled in one picture<a class="anchor" aria-label="anchor" href="#all-plots-bundled-in-one-picture"></a>
</h4>
<p>We can call combined_plots() to get all four plots in one picture.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/combined_plots.html">combined_plots</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0.001</span>, allowed_defect_rate <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>               cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-tiny-defects-all-plots-1.png" width="100%"></p>
<p>The blue graph, i.e. the upper left, shows the chance density for values from 0 to 1 of the defect rate for the minimum combination of n and k given a <em>posited</em> defect rate of 0.001, allowed defect rate of 0.01, and certainty of 0.95. The brown graphs, i.e. the other, show what happens with the number of draws needed when we vary posited defect rate, allowed defect rate and certainty.</p>
</div>
</div>
<div class="section level3">
<h3 id="no-defect-expected">No defect expected<a class="anchor" aria-label="anchor" href="#no-defect-expected"></a>
</h3>
<div class="section level4">
<h4 id="posited_defect_rate--0-allowed_defect_rate--001-cert--095">posited_defect_rate = <em>0</em>, allowed_defect_rate = 0.01, cert = 0.95<a class="anchor" aria-label="anchor" href="#posited_defect_rate--0-allowed_defect_rate--001-cert--095"></a>
</h4>
<p>You might expect to see no defect at all in the to be audited set of items. Then you could calculate as follows:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/drawsneeded.html">drawsneeded</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0</span>, allowed_defect_rate <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>            cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 298</span></span></code></pre></div>
<p>So then 298 samples is sufficient.</p>
<p>In a picture this looks like:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/drawsneeded_plot.html">drawsneeded_plot</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0</span>, allowed_defect_rate <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>                 cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-zero-defects-plot-1.png" width="100%"></p>
<p>Again, we can further analyse the situation by varying over posited_defect_rate, or over allowed_defect_rate or over cert. As we have above already studied varying the posited_defect_rate, we will not repeat that here.</p>
</div>
<div class="section level4">
<h4 id="varying-over-the-allowed-defect-rate-1">Varying over the allowed defect rate<a class="anchor" aria-label="anchor" href="#varying-over-the-allowed-defect-rate-1"></a>
</h4>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_varying_allowed_defect_rate.html">plot_varying_allowed_defect_rate</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0</span>, cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-zero-defects-vary-aer-plot-1.png" width="100%"></p>
<p>We see that as the allowed_defect_rate moves away from the posited_defect_rate, the number of draws falls sharply.</p>
<p>Non graphically this looks like:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/drawsneeded.html">drawsneeded</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0</span>,</span>
<span>            allowed_defect_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.001</span>, by <span class="op">=</span> <span class="fl">0.001</span>, to <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span>,</span>
<span>            cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0.001 0.002 0.003 0.004 0.005 0.006 0.007 0.008 0.009  0.01 </span></span>
<span><span class="co">#&gt;  2994  1496   997   747   597   497   426   372   331   298</span></span></code></pre></div>
<p>and,</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/drawsneeded.html">drawsneeded</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0</span>,</span>
<span>            allowed_defect_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.02</span>, by <span class="op">=</span> <span class="fl">0.01</span>, to <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>            cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0.02 0.03 0.04 0.05 0.06 0.07 0.08 0.09  0.1 </span></span>
<span><span class="co">#&gt;  148   98   73   58   48   41   35   31   28</span></span></code></pre></div>
<p>and,</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/drawsneeded.html">drawsneeded</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0</span>,</span>
<span>            allowed_defect_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.2</span>, by <span class="op">=</span> <span class="fl">0.1</span>, to <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span>,</span>
<span>            cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 </span></span>
<span><span class="co">#&gt;  13   8   5   4   3   2   1   1</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="varying-over-the-certainty-1">Varying over the certainty<a class="anchor" aria-label="anchor" href="#varying-over-the-certainty-1"></a>
</h4>
<p>Finally we can also vary over the certainty we apply.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_varying_cert.html">plot_varying_cert</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0</span>, allowed_defect_rate <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-zero-defects-vary-cert-plot-1.png" width="100%"></p>
<p>As might be expected: more certainty needs more draws.</p>
<p>In raw numbers this looks like:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/drawsneeded.html">drawsneeded</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0</span>, allowed_defect_rate <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>            cert <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.50</span>, by <span class="op">=</span> <span class="fl">0.05</span>, to <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  0.5 0.55  0.6 0.65  0.7 0.75  0.8 0.85  0.9 0.95 </span></span>
<span><span class="co">#&gt;   68   79   91  104  119  137  160  188  229  298</span></span></code></pre></div>
<p>We recognize the number 298 as the number of draws needed for cert 0.95.</p>
</div>
<div class="section level4">
<h4 id="all-plots-bundled-in-one-picture-1">All plots bundled in one picture<a class="anchor" aria-label="anchor" href="#all-plots-bundled-in-one-picture-1"></a>
</h4>
<p>We call combined_plots() to get all four plots in one picture.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/combined_plots.html">combined_plots</a></span><span class="op">(</span>posited_defect_rate <span class="op">=</span> <span class="fl">0</span>, allowed_defect_rate <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>               cert <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-zero-defects-all-plots-1.png" width="100%"></p>
<p>The blue graph, i.e. the upper left one, shows the chance density for values from 0 to 1 of the defect rate for the minimum combination of n and k given a <em>posited</em> defect rate of 0.0, allowed defect rate of 0.01, and certainty of 0.95. The brown graphs, i.e. the other, show what happens with the number of draws needed when we vary posited defect rate, allowed defect rate and certainty.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="suggested-extensions">Suggested extensions<a class="anchor" aria-label="anchor" href="#suggested-extensions"></a>
</h2>
<ul>
<li>Add a prior to drawsneeded().</li>
<li>Add a cost function that makes additional draws more expensive. The function can help with planning of incremental drawing.</li>
<li>Add to this README an example table of draws needed based on variations of posited defect rate, allowed defect rate and certainty.</li>
<li>Add a table function, that produces a table of draws needed based on variations of posited defect rate, allowed defect rate and certainty.</li>
<li>Make the functionality of this package into a live shiny app.</li>
</ul>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/cfjdoedens/drawsneeded/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/cfjdoedens/drawsneeded/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing drawsneeded</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Crist-Jan Doedens <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/cfjdoedens/drawsneeded/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/cfjdoedens/drawsneeded/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Crist-Jan Doedens.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
